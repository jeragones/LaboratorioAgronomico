
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////// EJECUCION DE QUERYS EN LA BASE DE DATOS ///////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

function dataBase(query) {
	var socket = io.connect('http://localhost:3000');
	socket.emit('databaseInput', { query : query });
	var result = socket.on('databaseOutput', function(data) { 
		var json = JSON.parse(data);
		alert(String(json.nombre));
		return json.nombre;
	});
	return result;
}

$(document).ready(function() {
	// FUNCION DE EJEMPLO
	$('#prueba').click(function() {
		// SI ES UNA CONSULTA SE CREA UNA VARIABLE PARA OBTENER EL RESULTADO DE LA MISMA, DE LO CONTRARIO NO ES NECESARIO CREAR LA VARIABLE
		
		//var mm = dataBase('CREATE DATABASE IF NOT EXISTS testeme');
		var mm = dataBase("select * from persona");
		
	});
});

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////// CONSULTAS A LA BASE DE DATOS ////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// Comprueba si el usuario existe en la base de datos
// usuario: correo del usuario
// clave: contraseÃ±a del usuario
function iniciarSesion(usuario, clave) {
	
	/*console.log("error");
	alert(usuario + " " + clave);
	//objDB.query('SELECT nombre, apellido1, apellido2 FROM persona WHERE correo LIKE "'+ usuario +'" AND clave LIKE "'+ clave +'"',  
	objDB.query('SELECT * FROM persona',  
	function(err, res, row) {
		if(err) {
			alert("ocurrio un error");
			console.log("error");
		} else {
			if(res.length > 0) {
				alert("inicio de sesion exitosa");
				return true;
			} else {
				alert("usuario invalido");
				return false;
			}
		}
	});*/
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////// INSERCIONES EN LA BASE DE DATOS //////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////// MODIFICACIONES EN LA BASE DE DATOS ////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////// ELIMINACIONES EN LA BASE DE DATOS /////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////




/*
connection.beginTransaction(function(err) {
  if (err) { throw err; }
  connection.query('INSERT INTO posts SET title=?', title, function(err, result) {
    if (err) { 
      connection.rollback(function() {
    throw err;
      });
    }

    var log = 'Post ' + result.insertId + ' added';

    connection.query('INSERT INTO log SET data=?', log, function(err, result) {
      if (err) { 
    connection.rollback(function() {
      throw err;
    });
      }  
      connection.commit(function(err) {
    if (err) { 
      connection.rollback(function() {
        throw err;
      });
    }
    console.log('success!');
      });
    });
  });
});
*/